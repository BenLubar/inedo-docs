<html>
<head>
    <title>Advanced Configuration</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta name="sequence" content="30" />
    <meta name="keywords" content="ldap,active-directory" />
</head>
<body>
    <p>
        In most installations, the default configuration for the <i>Active Directory (New)</i> user directory will <i>just work</i>; usually this is the case when the product's server is already joined to the domain associated with the users of the software. There are other cases when a more advanced configuration is required, common examples include:
        <ul class="docs">
            <li>
                Your Inedo product is not installed on the domain, or users are located in a different domain altogether
            </li>
            <li>
                NETBIOS mappings cannot be resolved correctly
            </li>
            <li>
                Trust relationships with domains that have common/shared user names
            </li>
            <li>
                External domain authentication (hosted LDAP)
            </li>
        </ul>
    </p>
    <p>
        For advanced configuration, select the <i>Change User Directory</i> link on the Administration page, and click <i>Advanced</i>. This will display the <i>Manage User Directories</i> page containing a list of all user directories configured in the system. Selecting the <i>Active Directory (New)</i> directory will open the settings window for that directory. The following options are configurable:
        <ul class="docs">
            <li>
                Name - a simple name to identify the user directory in the UI
            </li>
            <li>
                Domain controller host - <i>(requires v1.0.6 or later of InedoCore extension)</i> the host name or IP address of the domain controller or LDAP server. When specified, LDAP search queries will use this as the root of the search
                query (e.g. <code>LDAP://ldap.corp.example.com/</code>) whereas the default simply uses the root (i.e. <code>LDAP://</code>)
            </li>
            <li>
                Search mode - <i>current domain</i> refers to domain joined to the Inedo product's server
                <ul class="docs">
                    <li>
                        Current domain only - searches only within the domain of the current user credentials in effect for the security context under which the application is running
                    </li>
                    <li>
                        All trusted domains - searches all domains with an Inbound or Bidirectional Trust relationship of the current user credentials in effect for the security context under which the application is running
                    </li>
                    <li>
                        Specific list... – searches an explicit list of newline-separated domains with optional credentials named after a comma. The format for this value is: <code>domain.local,CredentialName</code>, where <code>,CredentialName</code> is optional to use a different security context than your product is running as. Configuring username/password credentials can be done from the <i>Manage User Directories</i> page.
                    </li>
                </ul>
            </li>
        </ul>
    </p>
    <p>
        NETBIOS name mapping – by default, the global catalog for the domain will be queried to determine any mappings. A list of key/value pairs that map NETBIOS names to domain names may also be specified (one per line); e.g. <code>KRAMUS=us.kramerica.local</code> and if any value is specified, the automatic query is not performed, so all NETBIOS names must be specified.
    </p>
    <h2 id="testing-config">Testing the Configuration</h2>
    <h4><i>Test searching</i></h4>
    <p>
        Enter the first few characters of a username and click <i>Test</i>. This will query the directory for any <i>samaccountname</i> or <i>user principal name</i> that begins with those characters, and write any debug information to the screen.
    </p>
    <h4><i>Test get user</i></h4>
    <p>
        Enter the user name in any of the formats described above to see whether the user or group is found. If not, that user will not be able to log in or be granted any privileges.
    </p>
</body>
</html>